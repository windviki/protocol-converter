2025-10-24 15:23:57,375 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:23:57,380 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:23:57,380 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:23:57,380 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:23:57,382 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_qecd3v7f
2025-10-24 15:23:57,386 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:23:57,414 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:23:57,522 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:23:57,522 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:23:57,522 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:23:57,527 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:23:57,527 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:23:57,530 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:23:57,530 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:23:57,535 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:23:57,538 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:23:57,543 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:23:57,545 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:23:57,546 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:23:57,546 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:23:57,551 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:23:57,563 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:23:57,563 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:23:57,567 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:23:57,575 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:23:57,579 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:23:57,609 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:23:57,609 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:23:57,610 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:23:57,610 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:23:57,611 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:23:57,611 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:23:57,612 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:23:57,612 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:23:57,612 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:23:57,613 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:23:57,613 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:23:57,614 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:23:57,614 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:23:57,614 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:23:57,620 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:23:57,620 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:23:57,625 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:23:57,643 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:23:57,643 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "[MISSING:road_name]",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "{{ coordinates | default '{}' }}",
          "landmark": "未知地点"
        },
        "traffic_info": {
          "congestion_level": "unknown",
          "estimated_time": "未知",
          "distance": "未知"
        },
        "metadata": {
          "processing_id": "conv_conv_10f",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_10f4668a7844",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "car",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": "normal"
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_10f",
        "conversion_timestamp": "20251024152357"
      }
    }
  }
}
2025-10-24 15:23:57,644 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:23:57,644 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:23:57,660 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:23:57,660 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "false",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_d31543a",
        "conversion_id": "conv_d31543a79425",
        "timestamp": "2025-10-24T15:23:57",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:23:57,661 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:23:57,712 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:23:57,714 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_0ecebfa_segsession_conv_conv_0ecebfa",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default '{}' }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default '{}' }}",
              "south_west": "{{ bounds_sw | default '{}' }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_0ecebfa",
              "conversion_id": "conv_0ecebfae053f",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_0ecebfae053f",
          "session_id": "session_conv_conv_0ecebfa",
          "timestamp": "2025-10-24T15:23:57",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:23:57,717 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:23:57,717 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:23:57,727 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:23:57,727 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:23:57,727 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:23:57,744 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:23:57,744 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "unknown",
        "priority": "NORMAL",
        "estimated_time": "unknown",
        "distance": "unknown",
        "coordinates": "{{ coordinates | default '{}' }}"
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:23:57,745 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:23:57,745 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:23:57,766 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:23:57,767 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_f489baa",
        "conversion_id": "conv_f489baabbd06",
        "timestamp": "2025-10-24T15:23:57",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:23:57,768 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:23:57,826 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:23:57,827 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_0054746_segsession_conv_conv_0054746",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default '{}' }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default '{}' }}",
              "south_west": "{{ bounds_sw | default '{}' }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_0054746",
              "conversion_id": "conv_00547468faa9",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_00547468faa9",
          "session_id": "session_conv_conv_0054746",
          "timestamp": "2025-10-24T15:23:57",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:23:57,830 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:23:57,830 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:23:57,838 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:23:57,839 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:23:57,840 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:23:57,843 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:23:57,843 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:23:57,844 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:23:57,854 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:23:57,854 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:23:57,857 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:23:57,860 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:23:57,861 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:23:57,861 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:23:57,861 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:23:57,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_qecd3v7f\test_results.json
2025-10-24 15:23:57,867 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_qecd3v7f
2025-10-24 15:23:57,867 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_qecd3v7f\\test.db'
2025-10-24 15:23:58,870 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_qecd3v7f
2025-10-24 15:23:58,871 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:26:51,367 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:26:51,367 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:26:51,367 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:26:51,367 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:26:51,368 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_r7izekem
2025-10-24 15:26:51,370 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:26:51,397 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:26:51,490 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:26:51,495 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:26:51,495 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:26:51,495 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:26:51,495 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:26:51,500 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:26:51,500 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:26:51,500 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:26:51,500 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:26:51,507 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:26:51,508 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:26:51,509 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:26:51,510 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:26:51,513 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:26:51,519 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:26:51,520 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:26:51,521 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:26:51,526 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:26:51,530 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:26:51,541 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:26:51,541 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:26:51,546 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:26:51,551 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:26:51,551 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:26:51,551 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:26:51,561 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:26:51,561 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "[MISSING:road_name]",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "{{ coordinates | default '{}' }}",
          "landmark": "未知地点"
        },
        "traffic_info": {
          "congestion_level": "unknown",
          "estimated_time": "未知",
          "distance": "未知"
        },
        "metadata": {
          "processing_id": "conv_conv_5e5",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_5e534005a5b3",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "car",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": "normal"
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_5e5",
        "conversion_timestamp": "20251024152651"
      }
    }
  }
}
2025-10-24 15:26:51,561 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:26:51,561 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:26:51,570 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:26:51,571 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "false",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_c3a7e74",
        "conversion_id": "conv_c3a7e746a834",
        "timestamp": "2025-10-24T15:26:51",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:26:51,571 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:26:51,586 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:26:51,586 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_d115c47_segsession_conv_conv_d115c47",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default '{}' }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default '{}' }}",
              "south_west": "{{ bounds_sw | default '{}' }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_d115c47",
              "conversion_id": "conv_d115c4764a63",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_d115c4764a63",
          "session_id": "session_conv_conv_d115c47",
          "timestamp": "2025-10-24T15:26:51",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:26:51,586 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:26:51,586 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:26:51,591 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:26:51,591 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:26:51,591 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:26:51,602 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:26:51,602 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "unknown",
        "priority": "NORMAL",
        "estimated_time": "unknown",
        "distance": "unknown",
        "coordinates": "{{ coordinates | default '{}' }}"
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:26:51,602 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:26:51,602 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:26:51,611 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:26:51,612 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_d4d0478",
        "conversion_id": "conv_d4d047801b7b",
        "timestamp": "2025-10-24T15:26:51",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:26:51,612 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:26:51,632 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:26:51,632 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_03cd298_segsession_conv_conv_03cd298",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default '{}' }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default '{}' }}",
              "south_west": "{{ bounds_sw | default '{}' }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_03cd298",
              "conversion_id": "conv_03cd2986f977",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_03cd2986f977",
          "session_id": "session_conv_conv_03cd298",
          "timestamp": "2025-10-24T15:26:51",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:26:51,632 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:26:51,632 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:26:51,637 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:26:51,637 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:26:51,637 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:26:51,640 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:26:51,640 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:26:51,640 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:26:51,642 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:26:51,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:26:51,647 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_r7izekem\test_results.json
2025-10-24 15:26:51,647 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_r7izekem
2025-10-24 15:26:51,647 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_r7izekem\\test.db'
2025-10-24 15:26:52,650 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_r7izekem
2025-10-24 15:26:52,650 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:30:20,262 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:30:20,262 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:30:20,262 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:30:20,262 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:30:20,270 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_zykfpisq
2025-10-24 15:30:20,277 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:30:20,342 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:30:20,613 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:30:20,613 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:30:20,626 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:30:20,628 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:30:20,630 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:30:20,638 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:30:20,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:30:20,642 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:30:20,653 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:30:20,661 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:30:20,667 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:30:20,670 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:30:20,675 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:30:20,682 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:30:20,700 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:30:20,703 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:30:20,703 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:30:20,719 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:30:20,743 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:30:20,832 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:30:20,833 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:30:20,834 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:30:20,836 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:30:20,837 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:30:20,839 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:30:20,839 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:30:20,840 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:30:20,841 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:30:20,842 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:30:20,843 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:30:20,844 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:30:20,844 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:30:20,844 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:30:20,875 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:30:20,876 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:30:20,876 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:30:20,914 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:30:20,914 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "[MISSING:road_name]",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "{{ coordinates | default \"{}\" }}",
          "landmark": "未知地点"
        },
        "traffic_info": {
          "congestion_level": "unknown",
          "estimated_time": "未知",
          "distance": "未知"
        },
        "metadata": {
          "processing_id": "conv_conv_2d2",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_2d2f126c7ea1",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "car",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": "normal"
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_2d2",
        "conversion_timestamp": "20251024153020"
      }
    }
  }
}
2025-10-24 15:30:20,914 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:30:20,914 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:30:20,971 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:30:20,973 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "false",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_fe832b8",
        "conversion_id": "conv_fe832b8ba6c6",
        "timestamp": "2025-10-24T15:30:20",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:30:20,974 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:30:21,117 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:30:21,119 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_62ebed4_segsession_conv_conv_62ebed4",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default \"{}\" }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default \"{}\" }}",
              "south_west": "{{ bounds_sw | default \"{}\" }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_62ebed4",
              "conversion_id": "conv_62ebed44111b",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_62ebed44111b",
          "session_id": "session_conv_conv_62ebed4",
          "timestamp": "2025-10-24T15:30:21",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:30:21,119 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:30:21,120 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:30:21,141 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:30:21,149 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:30:21,149 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:30:21,216 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:30:21,216 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "unknown",
        "priority": "NORMAL",
        "estimated_time": "unknown",
        "distance": "unknown",
        "coordinates": "{{ coordinates | default \"{}\" }}"
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:30:21,217 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:30:21,217 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:30:21,265 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:30:21,266 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_e6234ff",
        "conversion_id": "conv_e6234ff2c965",
        "timestamp": "2025-10-24T15:30:21",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:30:21,266 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:30:21,340 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:30:21,348 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_f3d0dec_segsession_conv_conv_f3d0dec",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default \"{}\" }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default \"{}\" }}",
              "south_west": "{{ bounds_sw | default \"{}\" }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_f3d0dec",
              "conversion_id": "conv_f3d0decee961",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_f3d0decee961",
          "session_id": "session_conv_conv_f3d0dec",
          "timestamp": "2025-10-24T15:30:21",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:30:21,348 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:30:21,348 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:30:21,369 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:30:21,370 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:30:21,370 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:30:21,378 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:30:21,378 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:30:21,378 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:30:21,394 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:30:21,395 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:30:21,395 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:30:21,396 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:30:21,396 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:30:21,410 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_zykfpisq\test_results.json
2025-10-24 15:30:21,412 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_zykfpisq
2025-10-24 15:30:21,412 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_zykfpisq\\test.db'
2025-10-24 15:30:22,413 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_zykfpisq
2025-10-24 15:30:22,413 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:31:30,024 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:31:30,025 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:31:30,025 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:31:30,026 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:31:30,030 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hdqo0hi8
2025-10-24 15:31:30,042 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:31:30,147 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:31:30,582 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:31:30,587 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:31:30,589 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:31:30,594 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:31:30,599 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:31:30,609 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:31:30,614 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:31:30,628 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:31:30,633 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:31:30,658 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:31:30,667 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:31:30,676 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:31:30,684 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:31:30,700 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:31:30,739 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:31:30,754 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:31:30,765 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:31:30,806 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:31:30,846 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:31:30,958 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:31:30,963 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:31:30,963 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:31:30,965 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:31:30,967 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:31:30,967 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:31:30,969 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:31:30,970 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:31:30,970 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:31:30,971 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:31:30,971 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:31:30,971 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:31:30,971 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:31:30,971 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:31:31,001 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:31:31,001 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:31:31,006 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:31:31,079 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:31:31,081 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "[MISSING:road_name]",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "{{ coordinates | default \"{}\" }}",
          "landmark": "未知地点"
        },
        "traffic_info": {
          "congestion_level": "unknown",
          "estimated_time": "未知",
          "distance": "未知"
        },
        "metadata": {
          "processing_id": "conv_conv_33d",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_33d2de72a8b8",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "car",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": "normal"
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_33d",
        "conversion_timestamp": "20251024153131"
      }
    }
  }
}
2025-10-24 15:31:31,081 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:31:31,081 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:31:31,160 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:31:31,161 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "false",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_cb488e3",
        "conversion_id": "conv_cb488e3d55ef",
        "timestamp": "2025-10-24T15:31:31",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:31:31,162 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:31:31,292 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:31:31,296 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_941f13d_segsession_conv_conv_941f13d",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default \"{}\" }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default \"{}\" }}",
              "south_west": "{{ bounds_sw | default \"{}\" }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_941f13d",
              "conversion_id": "conv_941f13d0fa8a",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_941f13d0fa8a",
          "session_id": "session_conv_conv_941f13d",
          "timestamp": "2025-10-24T15:31:31",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:31:31,296 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:31:31,296 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:31:31,331 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:31:31,331 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:31:31,331 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:31:31,397 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:31:31,397 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "unknown",
        "priority": "NORMAL",
        "estimated_time": "unknown",
        "distance": "unknown",
        "coordinates": "{{ coordinates | default \"{}\" }}"
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:31:31,397 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:31:31,397 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:31:31,463 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:31:31,463 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": "fastest"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_e762fbb",
        "conversion_id": "conv_e762fbb31303",
        "timestamp": "2025-10-24T15:31:31",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:31:31,463 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:31:31,643 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:31:31,645 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_01fb44d_segsession_conv_conv_01fb44d",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "[MISSING:road_name]",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "{{ coordinates | default \"{}\" }}",
            "landmark": {
              "nearest": "未知",
              "distance": "未知",
              "direction": "未知"
            },
            "bounds": {
              "north_east": "{{ bounds_ne | default \"{}\" }}",
              "south_west": "{{ bounds_sw | default \"{}\" }}"
            }
          },
          "traffic": {
            "current": {
              "level": "unknown",
              "description": "暂无信息",
              "update_time": "未知"
            },
            "estimates": {
              "duration": "未知",
              "distance": "未知",
              "delay": "0分钟"
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": "未知"
              },
              {
                "type": "shortest",
                "time": "未知"
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_01fb44d",
              "conversion_id": "conv_01fb44d707af",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "medium",
              "source_reliability": "unknown",
              "last_verified": "未知"
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "medium",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "unlimited",
          "max_time": "unlimited",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "unknown",
          "day_of_week": "unknown",
          "weather_conditions": "unknown",
          "season": "unknown"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_01fb44d707af",
          "session_id": "session_conv_conv_01fb44d",
          "timestamp": "2025-10-24T15:31:31",
          "processing_duration": "unknown"
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:31:31,647 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:31:31,647 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:31:31,679 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:31:31,680 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:31:31,680 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:31:31,689 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:31:31,691 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:31:31,691 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:31:31,720 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:31:31,720 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "上海",
      "district": "长宁区",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "false",
    "urgency": "normal"
  }
}
2025-10-24 15:31:31,720 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:31:31,749 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:31:31,749 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:31:31,770 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hdqo0hi8\test_results.json
2025-10-24 15:31:31,770 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hdqo0hi8
2025-10-24 15:31:31,770 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_hdqo0hi8\\test.db'
2025-10-24 15:31:32,775 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hdqo0hi8
2025-10-24 15:31:32,775 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:32:40,147 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:32:40,147 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:32:40,152 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:32:40,152 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:32:40,156 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_99xlagum
2025-10-24 15:32:40,163 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:32:40,252 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:32:40,564 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:32:40,568 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:32:40,576 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:32:40,577 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:32:40,582 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:32:40,593 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:32:40,597 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:32:40,601 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:32:40,606 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:32:40,627 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:32:40,635 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:32:40,639 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:32:40,649 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:32:40,664 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:32:40,694 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:32:40,699 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:32:40,706 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:32:40,728 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:32:40,767 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:32:40,846 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:32:40,851 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:32:40,851 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:32:40,854 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:32:40,855 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:32:40,857 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:32:40,857 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:32:40,857 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:32:40,857 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:32:40,857 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:32:40,862 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:32:40,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:32:40,862 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:32:40,862 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:32:40,890 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:32:40,890 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "",
    "urgency": "normal"
  }
}
2025-10-24 15:32:40,890 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:32:40,962 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:32:40,967 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "",
          "landmark": ""
        },
        "traffic_info": {
          "congestion_level": "",
          "estimated_time": "",
          "distance": ""
        },
        "metadata": {
          "processing_id": "conv_conv_ce4",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_ce41194b20a6",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": ""
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_ce4",
        "conversion_timestamp": "20251024153240"
      }
    }
  }
}
2025-10-24 15:32:40,967 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:32:40,967 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:32:41,028 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:32:41,036 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "",
        "district": "",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_6384860",
        "conversion_id": "conv_6384860af089",
        "timestamp": "2025-10-24T15:32:41",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:32:41,037 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:32:41,261 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:32:41,263 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_0ed78c3_segsession_conv_conv_0ed78c3",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_0ed78c3",
              "conversion_id": "conv_0ed78c371cd9",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_0ed78c371cd9",
          "session_id": "session_conv_conv_0ed78c3",
          "timestamp": "2025-10-24T15:32:41",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:32:41,263 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:32:41,263 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:32:41,292 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:32:41,293 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:32:41,294 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:32:41,348 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:32:41,348 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "",
        "priority": "NORMAL",
        "estimated_time": "",
        "distance": "",
        "coordinates": ""
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:32:41,348 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:32:41,348 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:32:41,423 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:32:41,426 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_409c5d9",
        "conversion_id": "conv_409c5d900de0",
        "timestamp": "2025-10-24T15:32:41",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:32:41,426 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:32:41,625 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:32:41,627 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_16a82c6_segsession_conv_conv_16a82c6",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_16a82c6",
              "conversion_id": "conv_16a82c62490a",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_16a82c62490a",
          "session_id": "session_conv_conv_16a82c6",
          "timestamp": "2025-10-24T15:32:41",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:32:41,628 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:32:41,629 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:32:41,652 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:32:41,653 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:32:41,653 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:32:41,664 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:32:41,664 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:32:41,665 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:32:41,697 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:32:41,697 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "",
    "avoid_tolls": "",
    "urgency": ""
  }
}
2025-10-24 15:32:41,702 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:32:41,710 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:32:41,710 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:32:41,712 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:32:41,712 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:32:41,713 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:32:41,713 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:32:41,713 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:32:41,714 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:32:41,714 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:32:41,714 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:32:41,717 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_99xlagum\test_results.json
2025-10-24 15:32:41,722 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_99xlagum
2025-10-24 15:32:41,726 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_99xlagum\\test.db'
2025-10-24 15:32:42,730 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_99xlagum
2025-10-24 15:32:42,730 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:32:53,606 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:32:53,607 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:32:53,607 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:32:53,607 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:32:53,610 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_8v63zwxh
2025-10-24 15:32:53,621 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:32:53,703 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:32:53,990 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:32:53,994 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:32:53,999 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:32:54,002 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:32:54,004 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:32:54,012 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:32:54,015 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:32:54,020 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:32:54,029 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:32:54,040 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:32:54,047 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:32:54,051 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:32:54,057 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:32:54,065 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:32:54,092 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:32:54,104 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:32:54,110 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:32:54,137 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:32:54,160 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:32:54,225 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:32:54,227 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:32:54,228 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:32:54,229 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:32:54,232 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:32:54,232 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:32:54,233 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:32:54,234 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:32:54,235 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:32:54,236 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:32:54,237 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:32:54,237 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:32:54,237 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:32:54,238 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:32:54,273 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:32:54,273 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "",
    "urgency": "normal"
  }
}
2025-10-24 15:32:54,273 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:32:54,337 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:32:54,337 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "",
          "landmark": ""
        },
        "traffic_info": {
          "congestion_level": "",
          "estimated_time": "",
          "distance": ""
        },
        "metadata": {
          "processing_id": "conv_conv_858",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_858bba8b4605",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": ""
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_858",
        "conversion_timestamp": "20251024153254"
      }
    }
  }
}
2025-10-24 15:32:54,337 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:32:54,337 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:32:54,387 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:32:54,387 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "",
        "district": "",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_87121cd",
        "conversion_id": "conv_87121cdd65ef",
        "timestamp": "2025-10-24T15:32:54",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:32:54,392 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:32:54,497 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:32:54,497 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_dfa4958_segsession_conv_conv_dfa4958",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_dfa4958",
              "conversion_id": "conv_dfa495893695",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_dfa495893695",
          "session_id": "session_conv_conv_dfa4958",
          "timestamp": "2025-10-24T15:32:54",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:32:54,500 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:32:54,500 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:32:54,517 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:32:54,517 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:32:54,520 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:32:54,554 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:32:54,554 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "",
        "priority": "NORMAL",
        "estimated_time": "",
        "distance": "",
        "coordinates": ""
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:32:54,554 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:32:54,554 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:32:54,588 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:32:54,593 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_8ac0a69",
        "conversion_id": "conv_8ac0a69cc588",
        "timestamp": "2025-10-24T15:32:54",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:32:54,593 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:32:54,758 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:32:54,759 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_13f5736_segsession_conv_conv_13f5736",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_13f5736",
              "conversion_id": "conv_13f5736d9ed6",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_13f5736d9ed6",
          "session_id": "session_conv_conv_13f5736",
          "timestamp": "2025-10-24T15:32:54",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:32:54,759 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:32:54,759 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:32:54,771 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:32:54,771 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:32:54,771 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:32:54,776 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:32:54,776 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:32:54,781 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:32:54,806 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:32:54,811 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "",
    "avoid_tolls": "",
    "urgency": ""
  }
}
2025-10-24 15:32:54,811 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:32:54,820 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:32:54,820 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:32:54,825 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_8v63zwxh\test_results.json
2025-10-24 15:32:54,830 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_8v63zwxh
2025-10-24 15:32:54,830 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_8v63zwxh\\test.db'
2025-10-24 15:32:55,833 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_8v63zwxh
2025-10-24 15:32:55,834 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:33:28,924 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:33:28,924 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:33:28,924 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:33:28,924 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:33:28,927 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hwq6yq7a
2025-10-24 15:33:28,937 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:33:29,012 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:33:29,281 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:33:29,286 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:33:29,292 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:33:29,292 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:33:29,297 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:33:29,302 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:33:29,305 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:33:29,311 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:33:29,316 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:33:29,326 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:33:29,332 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:33:29,336 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:33:29,340 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:33:29,350 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:33:29,378 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:33:29,384 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:33:29,386 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:33:29,402 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:33:29,419 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:33:29,474 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:33:29,475 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:33:29,476 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:33:29,477 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:33:29,478 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:33:29,479 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:33:29,480 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:33:29,480 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:33:29,481 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:33:29,482 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:33:29,483 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:33:29,483 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:33:29,483 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:33:29,483 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:33:29,510 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:33:29,510 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "",
    "urgency": "normal"
  }
}
2025-10-24 15:33:29,511 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:33:29,552 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:33:29,553 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "",
          "landmark": ""
        },
        "traffic_info": {
          "congestion_level": "",
          "estimated_time": "",
          "distance": ""
        },
        "metadata": {
          "processing_id": "conv_conv_b64",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_b64728e3113d",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": ""
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_b64",
        "conversion_timestamp": "20251024153329"
      }
    }
  }
}
2025-10-24 15:33:29,553 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:33:29,553 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:33:29,595 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:33:29,595 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "",
        "district": "",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_a413027",
        "conversion_id": "conv_a4130271a8f4",
        "timestamp": "2025-10-24T15:33:29",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:33:29,596 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:33:29,709 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:33:29,711 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_7d832de_segsession_conv_conv_7d832de",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_7d832de",
              "conversion_id": "conv_7d832de95507",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_7d832de95507",
          "session_id": "session_conv_conv_7d832de",
          "timestamp": "2025-10-24T15:33:29",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:33:29,711 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:33:29,712 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:33:29,733 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:33:29,733 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:33:29,733 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:33:29,774 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:33:29,774 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "",
        "priority": "NORMAL",
        "estimated_time": "",
        "distance": "",
        "coordinates": ""
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:33:29,775 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:33:29,776 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:33:29,818 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:33:29,819 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_b4e0716",
        "conversion_id": "conv_b4e0716ebbb6",
        "timestamp": "2025-10-24T15:33:29",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:33:29,819 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:33:29,943 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:33:29,943 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_396a934_segsession_conv_conv_396a934",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_396a934",
              "conversion_id": "conv_396a934841d0",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_396a934841d0",
          "session_id": "session_conv_conv_396a934",
          "timestamp": "2025-10-24T15:33:29",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:33:29,948 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:33:29,948 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:33:29,965 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:33:29,965 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:33:29,965 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:33:29,970 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:33:29,975 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:33:29,975 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:33:29,993 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:33:29,993 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "",
    "avoid_tolls": "",
    "urgency": ""
  }
}
2025-10-24 15:33:29,993 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:33:30,003 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:33:30,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:33:30,014 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hwq6yq7a\test_results.json
2025-10-24 15:33:30,015 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hwq6yq7a
2025-10-24 15:33:30,015 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_hwq6yq7a\\test.db'
2025-10-24 15:33:31,020 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_hwq6yq7a
2025-10-24 15:33:31,020 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
2025-10-24 15:34:04,576 | INFO     | test_comprehensive_navigation:<module>:52 - 使用标准logging日志系统
2025-10-24 15:34:04,576 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:248 - 项目根目录: C:\work\gw\protocol_converter
2025-10-24 15:34:04,576 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:249 - Examples目录: C:\work\gw\protocol_converter\examples
2025-10-24 15:34:04,576 | INFO     | test_comprehensive_navigation:setup_test_environment:57 - === 开始综合导航协议测试 ===
2025-10-24 15:34:04,576 | INFO     | test_comprehensive_navigation:setup_test_environment:61 - 使用临时目录: C:\Users\viki\AppData\Local\Temp\comprehensive_test_q9lvg5rl
2025-10-24 15:34:04,586 | INFO     | test_comprehensive_navigation:setup_test_environment:71 - ✓ 数据库初始化成功
2025-10-24 15:34:04,646 | INFO     | test_comprehensive_navigation:load_protocols:88 - 加载协议目录: C:\work\gw\protocol_converter\examples\protocols
2025-10-24 15:34:04,893 | INFO     | test_comprehensive_navigation:load_protocols:96 - 加载结果: {'total_files': 15, 'loaded_files': 15, 'failed_files': 0, 'errors': []}
2025-10-24 15:34:04,898 | INFO     | test_comprehensive_navigation:load_protocols:100 - 可用协议族: ['A', 'B', 'C']
2025-10-24 15:34:04,902 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 A: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5']
2025-10-24 15:34:04,905 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 B: ['B-1', 'B-2', 'B-3', 'B-4', 'B-5']
2025-10-24 15:34:04,906 | INFO     | test_comprehensive_navigation:load_protocols:104 - 协议族 C: ['C-1', 'C-2', 'C-3', 'C-4', 'C-5']
2025-10-24 15:34:04,911 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-1
2025-10-24 15:34:04,917 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-2
2025-10-24 15:34:04,920 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-3
2025-10-24 15:34:04,925 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-4
2025-10-24 15:34:04,936 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: A-5
2025-10-24 15:34:04,941 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-1
2025-10-24 15:34:04,941 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-2
2025-10-24 15:34:04,949 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-3
2025-10-24 15:34:04,956 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-4
2025-10-24 15:34:04,974 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: B-5
2025-10-24 15:34:04,979 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-1
2025-10-24 15:34:04,985 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-2
2025-10-24 15:34:05,003 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-3
2025-10-24 15:34:05,017 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-4
2025-10-24 15:34:05,063 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:274 - 转换器加载协议: C-5
2025-10-24 15:34:05,065 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-1
2025-10-24 15:34:05,065 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-2
2025-10-24 15:34:05,066 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-3
2025-10-24 15:34:05,067 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-4
2025-10-24 15:34:05,067 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: A-5
2025-10-24 15:34:05,068 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-4
2025-10-24 15:34:05,068 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: B-5
2025-10-24 15:34:05,068 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-3
2025-10-24 15:34:05,069 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-4
2025-10-24 15:34:05,070 | INFO     | test_comprehensive_navigation:load_input_data:124 - 加载输入数据: C-5
2025-10-24 15:34:05,070 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:280 - 加载了 10 个输入数据文件
2025-10-24 15:34:05,071 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> B 转换 ---
2025-10-24 15:34:05,071 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-4)
2025-10-24 15:34:05,085 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:34:05,085 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "31.2204",
        "longitude": "121.4256"
      }
    },
    "vehicle_type": "car",
    "avoid_tolls": "",
    "urgency": "normal"
  }
}
2025-10-24 15:34:05,085 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> B (A-5)
2025-10-24 15:34:05,123 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:34:05,123 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_ROUTES",
  "slots": {
    "routes": [
      "",
      {
        "road_name": "",
        "road_type": "{% if loop.index == 1 %}primary{% else %}secondary{% endif %}",
        "sequence": "-1",
        "total_segments": "0",
        "address_info": {
          "full_name": "",
          "admin_level": "city",
          "is_main_road": "false"
        },
        "location": {
          "coordinates": "",
          "landmark": ""
        },
        "traffic_info": {
          "congestion_level": "",
          "estimated_time": "",
          "distance": ""
        },
        "metadata": {
          "processing_id": "conv_conv_9c8",
          "processing_progress": "1/1 (100.0%)",
          "conversion_id": "conv_9c88b39fb7d1",
          "protocol_path": "slots.routes.metadata.protocol_path",
          "is_final_segment": "false"
        }
      }
    ],
    "navigation_options": {
      "vehicle": "",
      "avoid_tolls": "True",
      "route_preference": "fastest",
      "urgency": ""
    },
    "context": {
      "operation": "intersection_navigation",
      "source_format": "B-5",
      "target_protocols": [
        "A-4",
        "A-5",
        "C-4",
        "C-5"
      ],
      "session_info": {
        "session_id": "conv_conv_9c8",
        "conversion_timestamp": "20251024153405"
      }
    }
  }
}
2025-10-24 15:34:05,123 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 A -> C 转换 ---
2025-10-24 15:34:05,123 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-4)
2025-10-24 15:34:05,153 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-4
2025-10-24 15:34:05,154 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "",
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "",
        "district": "",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_2d2a9a4",
        "conversion_id": "conv_2d2a9a42b1e9",
        "timestamp": "2025-10-24T15:34:05",
        "protocol": "A_to_A"
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:34:05,154 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: A -> C (A-5)
2025-10-24 15:34:05,236 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: A-5
2025-10-24 15:34:05,236 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_46034eb_segsession_conv_conv_46034eb",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_46034eb",
              "conversion_id": "conv_46034ebe667f",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "True",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "A",
          "target_protocol": "C",
          "conversion_id": "conv_46034ebe667f",
          "session_id": "session_conv_conv_46034eb",
          "timestamp": "2025-10-24T15:34:05",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_UNKNOWN",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:34:05,236 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> A 转换 ---
2025-10-24 15:34:05,236 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-4)
2025-10-24 15:34:05,247 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:34:05,252 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "car",
    "urgency": "normal",
    "route_type": "",
    "coordinates": {
      "latitude": "31.2204",
      "longitude": "121.4256",
      "address": ""
    }
  }
}
2025-10-24 15:34:05,252 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> A (B-5)
2025-10-24 15:34:05,280 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:34:05,280 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "MULTI_WAYPOINT",
  "slots": {
    "origin": "",
    "waypoints": [
      "",
      {
        "name": "",
        "type": "",
        "priority": "NORMAL",
        "estimated_time": "",
        "distance": "",
        "coordinates": ""
      }
    ],
    "avoid_tolls": "False",
    "route_preference": "fastest"
  }
}
2025-10-24 15:34:05,280 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 B -> C 转换 ---
2025-10-24 15:34:05,280 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-4)
2025-10-24 15:34:05,330 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-4
2025-10-24 15:34:05,331 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.route.to_intersection",
  "slots": [
    {
      "name": "PRIMARY_ROAD",
      "value": "天山西路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "high",
        "source_field": "primary_road"
      }
    },
    {
      "name": "SECONDARY_ROAD",
      "value": "仙霞路",
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "road",
        "importance": "medium",
        "source_field": "secondary_road"
      }
    },
    {
      "name": "LOCATION",
      "value": {
        "city": "上海市",
        "district": "长宁区",
        "coordinates": {
          "lat": "31.2204",
          "lng": "121.4256"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "location",
        "importance": "high",
        "is_nested": true
      }
    },
    {
      "name": "NAVIGATION_PARAMS",
      "value": {
        "vehicle": "car",
        "avoid_tolls": "False",
        "urgency": "normal",
        "route_preference": ""
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_options",
        "importance": "medium",
        "is_nested": true
      }
    },
    {
      "name": "SESSION_INFO",
      "value": {
        "session_id": "session_conv_conv_3f4c4e6",
        "conversion_id": "conv_3f4c4e673cfe",
        "timestamp": "2025-10-24T15:34:05",
        "protocol": "B_to_B"
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "session",
        "importance": "low",
        "auto_generated": true
      }
    }
  ]
}
2025-10-24 15:34:05,331 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: B -> C (B-5)
2025-10-24 15:34:05,435 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: B-5
2025-10-24 15:34:05,435 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "tao": "navigation.multi_route.complex",
  "slots": [
    {
      "name": "ROUTE_SEGMENTS",
      "value": [
        "",
        {
          "segment_id": "session_conv_conv_5f7c1c1_segsession_conv_conv_5f7c1c1",
          "sequence_info": {
            "index": "-1",
            "total": "0",
            "progress": "1/1 (100.0%)",
            "is_final": "false"
          },
          "road_data": {
            "name": "",
            "type": "SECONDARY",
            "full_address": "",
            "administrative": {
              "level": "unknown",
              "names": {
                "city": "",
                "district": "",
                "province": ""
              }
            }
          },
          "geographic": {
            "coordinates": "",
            "landmark": {
              "nearest": "",
              "distance": "",
              "direction": ""
            },
            "bounds": {
              "north_east": "",
              "south_west": ""
            }
          },
          "traffic": {
            "current": {
              "level": "",
              "description": "",
              "update_time": ""
            },
            "estimates": {
              "duration": "",
              "distance": "",
              "delay": ""
            },
            "alternatives": [
              {
                "type": "fastest",
                "time": ""
              },
              {
                "type": "shortest",
                "time": ""
              }
            ]
          },
          "metadata": {
            "processing": {
              "session_id": "session_conv_conv_5f7c1c1",
              "conversion_id": "conv_5f7c1c1edef7",
              "render_depth": "4",
              "current_path": "slots.value.metadata.processing.current_path",
              "parent_path": "root"
            },
            "quality": {
              "confidence": "",
              "source_reliability": "",
              "last_verified": ""
            },
            "annotations": {
              "notes": "",
              "warnings": "[MISSING:segment_warnings]",
              "restrictions": "[MISSING:segment_restrictions]"
            }
          }
        }
      ],
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "dynamic_array",
        "array_processing": true,
        "element_count": "0"
      }
    },
    {
      "name": "NAVIGATION_CONFIG",
      "value": {
        "vehicle": {
          "type": "car",
          "size": "",
          "special_requirements": "[MISSING:vehicle_requirements]"
        },
        "preferences": {
          "route": "fastest",
          "avoid_tolls": "False",
          "avoid_highways": "[MISSING:avoid_highways]",
          "avoid_ferries": "[MISSING:avoid_ferries]"
        },
        "constraints": {
          "max_distance": "",
          "max_time": "",
          "urgency": "normal",
          "priority_routes": "[MISSING:priority_routes]"
        },
        "context": {
          "time_of_day": "",
          "day_of_week": "",
          "weather_conditions": "",
          "season": ""
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "navigation_config",
        "complex_nested": true
      }
    },
    {
      "name": "SYSTEM_METADATA",
      "value": {
        "conversion": {
          "source_protocol": "B",
          "target_protocol": "C",
          "conversion_id": "conv_5f7c1c1edef7",
          "session_id": "session_conv_conv_5f7c1c1",
          "timestamp": "2025-10-24T15:34:05",
          "processing_duration": ""
        },
        "template": {
          "template_id": "C-5",
          "version": "1.0",
          "features": [
            "dynamic_arrays",
            "complex_nesting",
            "conditional_rendering",
            "jinja2_filters",
            "context_variables"
          ]
        },
        "debug": {
          "render_depth": "3",
          "current_path": "slots.value.value.debug.current_path",
          "array_processing": "[MISSING:__array_total > 0]",
          "total_processed_items": "0"
        }
      },
      "label": "PHONE_TYPE_GENERIC",
      "metadata": {
        "type": "system",
        "auto_generated": true,
        "debug_info": true
      }
    }
  ]
}
2025-10-24 15:34:05,435 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> A 转换 ---
2025-10-24 15:34:05,435 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-4)
2025-10-24 15:34:05,446 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:34:05,446 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "ROUTE_TO",
  "slots": {
    "destination": "",
    "poi_type": "",
    "vehicle_type": "",
    "urgency": "",
    "route_type": "",
    "coordinates": {
      "latitude": "",
      "longitude": "",
      "address": ""
    }
  }
}
2025-10-24 15:34:05,446 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> A (C-5)
2025-10-24 15:34:05,451 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:34:05,451 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:291 - 
--- 测试 C -> B 转换 ---
2025-10-24 15:34:05,451 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-4)
2025-10-24 15:34:05,466 | INFO     | test_comprehensive_navigation:test_conversion:138 - ✓ 转换成功: C-4
2025-10-24 15:34:05,470 | INFO     | test_comprehensive_navigation:test_conversion:141 - 转换结果:
{
  "domain": "navigation",
  "action": "NAVIGATE_TO_INTERSECTION",
  "slots": {
    "intersection": {
      "primary_road": "天山西路",
      "secondary_road": "",
      "city": "",
      "district": "",
      "coordinates": {
        "latitude": "",
        "longitude": ""
      }
    },
    "vehicle_type": "",
    "avoid_tolls": "",
    "urgency": ""
  }
}
2025-10-24 15:34:05,470 | INFO     | test_comprehensive_navigation:test_conversion:131 - 测试转换: C -> B (C-5)
2025-10-24 15:34:05,476 | ERROR    | test_comprehensive_navigation:test_conversion:144 - ✗ 转换失败: C-5 - expected token 'end of print statement', got 'string'
2025-10-24 15:34:05,476 | INFO     | test_comprehensive_navigation:test_address_splitting_merge:154 - 
=== 测试地址拆分和合并功能 ===
2025-10-24 15:34:05,476 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:308 - 地址拆分合并测试用例: 2
2025-10-24 15:34:05,476 | INFO     | test_comprehensive_navigation:test_dynamic_arrays:193 - 
=== 测试动态数组功能 ===
2025-10-24 15:34:05,477 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:312 - 动态数组测试用例: 1
2025-10-24 15:34:05,477 | INFO     | test_comprehensive_navigation:test_jinja2_features:215 - 
=== 测试Jinja2高级特性 ===
2025-10-24 15:34:05,477 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:316 - Jinja2特性测试用例: 3
2025-10-24 15:34:05,477 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:319 - 
=== 测试总结 ===
2025-10-24 15:34:05,477 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:320 - 总测试数: 10
2025-10-24 15:34:05,477 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:321 - 成功转换: 10
2025-10-24 15:34:05,480 | INFO     | test_comprehensive_navigation:run_comprehensive_tests:327 - 测试结果已保存到: C:\Users\viki\AppData\Local\Temp\comprehensive_test_q9lvg5rl\test_results.json
2025-10-24 15:34:05,480 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:344 - 无法删除临时目录（文件可能被锁定）: C:\Users\viki\AppData\Local\Temp\comprehensive_test_q9lvg5rl
2025-10-24 15:34:05,480 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:345 - 错误信息: [WinError 32] 另一个程序正在使用此文件，进程无法访问。: 'C:\\Users\\viki\\AppData\\Local\\Temp\\comprehensive_test_q9lvg5rl\\test.db'
2025-10-24 15:34:06,485 | WARNING  | test_comprehensive_navigation:run_comprehensive_tests:353 - 跳过临时目录清理，请手动删除: C:\Users\viki\AppData\Local\Temp\comprehensive_test_q9lvg5rl
2025-10-24 15:34:06,485 | INFO     | test_comprehensive_navigation:<module>:359 - 
=== 所有综合测试完成! ===
